@page "/"

<h1>Lantern [@isFlashOn]</h1>

Turn on the lantern to see the light!

<button @onclick="ToggleFlash">🔦 Back</button>
<button @onclick="ShowWhiteScreen">💡 Front</button>

@code {
    private bool isFlashOn = false;

    private async Task ToggleFlash()
    {
        isFlashOn = !isFlashOn;
        if (isFlashOn)
        {
            await Flashlight.Default.TurnOffAsync();
            LocalNotificationCenter.Current.Cancel(100);
        }
        else
        {
            await Flashlight.Default.TurnOnAsync();
            ShowFlashNotification();
        }
    }

    private void ShowFlashNotification()
    {
        var request = new NotificationRequest
        {
            NotificationId = 100,
            Title = "Active Lantern",
            Description = "Touch here to turn it off",
            ReturningData = "turnoff_flash",
            Android = new Plugin.LocalNotification.AndroidOption.AndroidOptions
            {
                Priority = Plugin.LocalNotification.AndroidOption.AndroidPriority.Max,
                AutoCancel = false,
                IconSmallName = new Plugin.LocalNotification.AndroidOption.AndroidIcon("ic_launcher")
            }
        };

        NotificationCenter.Current.Show(request);
    }

    private void ShowWhiteScreen()
    {
        Shell.Current.GoToAsync(nameof(WhiteScreenPage));
    }
}